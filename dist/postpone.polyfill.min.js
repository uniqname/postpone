/*!
@name          postpone.polyfill
@description   implementation of postpone getAttribute
                (https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/
                    ResourcePriorities/Overview.html#attr-postpone)
@version       0.1.0 - 2014/04/30
@author        Cory Brown
@copyright     Copyright 2013 by Intellectual Reserve, Inc.
*/
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};window.addEventListener("DOMContentLoaded",function(){var b,c,d,e,f,g,h,i;if(d="data-postpone-src",f=document.createElement("img"),e=function(b,c){return!!(a.call(b,c)>=0)},b=function(a){var b,c,e,f,g,h,i,j,k,l;return b=null!=(l=a.hasAttribute("data-postpone"))?l:{"data-postpone":"postpone"},k=parseInt(a.getAttribute(b,10)),k=isNaN(k)?0:k,c=a.offsetTop-window.innerHeight-window.scrollY,g=window.scrollY-(a.offsetTop+a.offsetHeight),e=window.scrollX-(a.offsetLeft+a.offsetWidth),f=a.offsetLeft-(window.scrollX+window.innerWidth),h=Math.max(g,c,e,f,0),i=h-k,0>=i&&(j=a.getAttribute(d))?(a.src=j,a.removeAttribute(d),a.removeAttribute("postpone")):void 0},e(f,"postpone"))return Array.prototype.forEach.call(document.querySelectorAll("[postpone], [data-postpone]"),function(){return c.src=c.getAttribute(d),c.removeAttribute(d)});for(i=document.querySelectorAll("[postpone], [data-postpone]"),g=0,h=i.length;h>g;g++)c=i[g],b(c);return window.addEventListener("scroll",function(){var a,d,e,f;for(e=document.querySelectorAll("[postpone], [data-postpone]"),f=[],a=0,d=e.length;d>a;a++)c=e[a],f.push(b(c));return f}),window.addEventListener("resize",function(){var a,d,e,f;for(e=document.querySelectorAll("[postpone], [data-postpone]"),f=[],a=0,d=e.length;d>a;a++)c=e[a],f.push(b(c));return f})})}).call(this);