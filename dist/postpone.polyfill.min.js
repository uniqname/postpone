/*!
@name          postpone.polyfill
@description   implementation of postpone getAttribute
                (https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/
                    ResourcePriorities/Overview.html#attr-postpone)
@version       0.1.0 - 2014/10/29
@author        Cory Brown
@copyright     Copyright 2013 by Intellectual Reserve, Inc.
*/
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};window.addEventListener("DOMContentLoaded",function(){var b,c,d,e,f,g,h,i;if(d="data-postpone-",f=document.createElement("img"),e=function(b,c){return!!(a.call(b,c)>=0)},b=function(a){var b,c,e,f,g,h,i,j,k,l;return i=a.hasAttribute("data-postpone")?"data-postpone":"postpone",j=function(){var b,c,e,f,g;for(g=a.attributes,c=e=0,f=g.length;f>e;c=++e)if(b=g[c],b=b.name,b.match(d))return b.replace(d,"")}(),l=parseInt(a.getAttribute(i,10)),l=isNaN(l)?0:l,b=a.offsetTop-window.innerHeight-window.scrollY,f=window.scrollY-(a.offsetTop+a.offsetHeight),c=window.scrollX-(a.offsetLeft+a.offsetWidth),e=a.offsetLeft-(window.scrollX+window.innerWidth),g=Math.max(f,b,c,e,0),h=g-l,0>=h&&(k=a.getAttribute(d+j))?(a[j]=k,a.removeAttribute(d+j),a.removeAttribute("postpone")):void 0},e(f,"postpone"))return Array.prototype.forEach.call(document.querySelectorAll("[postpone], [data-postpone]"),function(a){var b;return b=function(){var b,c,e;e=a.attributes;for(c in e)if(b=e[c],b=b.name,b.match(d))return b.replace(d,"")}(),a[b]=a.getAttribute(d+b),a.removeAttribute(d+b)});for(i=document.querySelectorAll("[postpone], [data-postpone]"),g=0,h=i.length;h>g;g++)c=i[g],b(c);return window.addEventListener("scroll",function(){var a,d,e,f;for(e=document.querySelectorAll("[postpone], [data-postpone]"),f=[],a=0,d=e.length;d>a;a++)c=e[a],f.push(b(c));return f}),window.addEventListener("resize",function(){var a,d,e,f;for(e=document.querySelectorAll("[postpone], [data-postpone]"),f=[],a=0,d=e.length;d>a;a++)c=e[a],f.push(b(c));return f})})}).call(this);