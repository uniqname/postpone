/*!
@name          postpone.polyfill
@description   implementation of postpone getAttribute
                (https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/
                    ResourcePriorities/Overview.html#attr-postpone)
@version       0.1.0 - 2014/04/16
@author        Cory Brown
@copyright     Copyright 2013 by Intellectual Reserve, Inc.
*/
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};window.addEventListener("DOMContentLoaded",function(){var b,c,d,e,f,g,h,i;if(d="data-src",f=document.createElement("img"),e=function(b,c){return!!(a.call(b,c)>=0)},b=function(a){var b,c,e,f,g,h,i,j;return j=parseInt(a.getAttribute("postpone",10)),j=isNaN(j)?0:j,b=a.offsetTop-window.innerHeight-window.scrollY,f=window.scrollY-(a.offsetTop+a.offsetHeight),c=window.scrollX-(a.offsetLeft+a.offsetWidth),e=a.offsetLeft-(window.scrollX+window.innerWidth),g=Math.max(f,b,c,e,0),h=g-j,0>=h&&(i=a.getAttribute(d))?(a.src=i,a.removeAttribute(d),a.removeAttribute("postpone")):void 0},e(f,"postpone"))return Array.prototype.forEach.call(document.querySelectorAll("[postpone]"),function(){return c.src=c.getAttribute(d),c.removeAttribute(d)});for(i=document.querySelectorAll("[postpone]"),g=0,h=i.length;h>g;g++)c=i[g],b(c);return window.addEventListener("scroll",function(){var a,d,e,f;for(e=document.querySelectorAll("[postpone]"),f=[],a=0,d=e.length;d>a;a++)c=e[a],f.push(b(c));return f}),window.addEventListener("resize",function(){var a,d,e,f;for(e=document.querySelectorAll("[postpone]"),f=[],a=0,d=e.length;d>a;a++)c=e[a],f.push(b(c));return f})})}).call(this);