/*!
 @name 			postpone.polyfill
 @description	implementation of postpone attribute (https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/ResourcePriorities/Overview.html#attr-postpone)
 @version		0.1.0 - 2014/04/16
 @author		Cory Brown
 @copyright		Copyright 2013 by Intellectual Reserve, Inc.
*/
(function(){var a,b,c,d,e,f,g,h,i=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};if(c="data-src",e=document.createElement("img"),d=function(a,b){return!!(i.call(a,b)>=0)},a=function(a){var b,d,e,f,g,h,i,j;return j=parseInt(a.getAttribute("postpone",10)),j=isNaN(j)?0:j,b=a.offsetTop-window.innerHeight-window.scrollY,f=window.scrollY-(a.offsetTop+a.offsetHeight),d=window.scrollX-(a.offsetLeft+a.offsetWidth),e=a.offsetLeft-(window.scrollX+window.innerWidth),g=Math.max(f,b,d,e,0),h=g-j,0>=h&&(i=a.getAttribute(c))?(a.src=i,a.removeAttribute(c),a.removeAttribute("postpone")):void 0},d(e,"postpone"))Array.prototype.forEach.call(document.querySelectorAll("[postpone]"),function(){return b.src=b.getAttribute(c),b.removeAttribute(c)});else{for(h=document.querySelectorAll("[postpone]"),f=0,g=h.length;g>f;f++)b=h[f],a(b);window.addEventListener("scroll",function(){var c,d,e,f;for(e=document.querySelectorAll("[postpone]"),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(a(b));return f}),window.addEventListener("resize",function(){var c,d,e,f;for(e=document.querySelectorAll("[postpone]"),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(a(b));return f})}}).call(this);